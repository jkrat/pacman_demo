<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Pac Man</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="resources/style.css" />
    <!-- <script src="main.js"></script> -->
</head>
<body>
    <div id="world"></div>

    <div id="pacman"></div>

    <div id="score"></div>

    <script>
    
    var world = [
        [2,2,2,2,2,2,2,2,2,2,2,2],
        [2,3,1,1,1,1,1,1,1,1,1,2],
        [2,1,1,1,1,1,1,1,1,1,1,2],
        [2,1,1,1,1,1,1,1,1,1,1,2],
        [2,1,1,1,1,1,1,1,1,1,1,2],
        [2,1,1,1,1,3,1,1,1,1,1,2],
        [2,1,1,1,1,1,1,1,1,1,1,2],
        [2,1,1,1,1,1,1,1,1,1,1,2],
        [2,1,1,1,1,1,1,1,1,1,1,2],
        [2,1,1,1,1,1,1,1,1,1,1,2],
        [2,2,2,2,2,2,2,2,2,2,2,2]
    ];

    var score = 0;

    var pacman = {
        x: 1, 
        y: 1
    };


    function displayWorld() {
        var output = '';

        for (var i = 0; i < world.length; i++) {
            output += "\n<div class='row'>\n";
            for (var j = 0; j < world[i].length; j++) {
                if (world[i][j] == 2) {
                    output += "<div class='brick'></div>";
                } else if (world[i][j] == 1) {
                    output += "<div class='coin'></div>";
                } else if (world[i][j] == 3) {
                    output += "<div class='empty'></div>";
                }
            }
            output += "\n</div>";
        }
        // console.log(output);
        document.getElementById('world').innerHTML = output;
    }

    function displayPacman() {
        document.getElementById('pacman').style.top = pacman.y * 20 + "px";
        document.getElementById('pacman').style.left = pacman.x * 20 + "px";
    }

    function displayScore() {
        document.getElementById('score').innerHTML = "<h3>" + score + "</h3>";
    }

    displayWorld();
    displayPacman();
    displayScore();


    document.onkeydown = function(e) {
        if (e.keyCode === 40 && (world[pacman.y + 1][pacman.x] === 1 || world[pacman.y + 1][pacman.x] === 3)) {
            pacman.y++;
        } else if (e.keyCode === 37 && (world[pacman.y][pacman.x - 1] === 1 || world[pacman.y][pacman.x - 1] === 3)) {
            pacman.x--;
        } else if (e.keyCode === 39 && (world[pacman.y][pacman.x + 1] === 1 || world[pacman.y][pacman.x + 1] === 3))  {
            pacman.x++;
        } else if (e.keyCode === 38 && (world[pacman.y - 1][pacman.x] === 1 || world[pacman.y - 1][pacman.x] === 3))  {
            pacman.y--;
        }

        if (world[pacman.y][pacman.x] === 1) {
            world[pacman.y][pacman.x] = 3;
            score += 10;
            displayWorld();
            displayScore();
        }
        console.log(pacman);
        displayPacman();
    };

    </script>
    
    
</body>
</html>